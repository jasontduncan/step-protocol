# Phase 2 â€“ Step 2.3: Implement `worktree init`
status: done
started: 2025-11-25T20:14:00Z
completed: 2025-11-25T20:21:25Z

## Scope
Initialize a new WorkNode in the current directory, generate minimal PLAN/STATE/logs layout consistent with docs/work/WORK_PROTOCOL.md, and hook the CLI `init` command into that workflow.

## Plan
- [x] Add helpers that generate a default PLAN.md/STATE.md pair, create logs/, and guard against overwriting existing WorkNodes.
- [x] Update the WorkNode API so `worktree init` can call the helper and immediately verify the layout.
- [x] Wire the CLI `init` handler to parse `--target`/`--node`, call the initializer, and report the resulting path plus next steps.

## Notes
- 2025-11-25T20:16:30Z Introduced `DEFAULT_INIT_PLAN_STEPS`, `buildPlanMarkdown`, and `WorkNode.initialize` so new nodes are bootstrapped with a default step and matching STATE.md before any work begins.
- 2025-11-25T20:17:10Z Extended `WorkNode.initialize` to use atomic writes and existing helpers so the new PLAN/STATE layout is crash-safe while still preventing accidental overwrites.
- 2025-11-25T20:18:20Z Added CLI parsing helpers plus `handleInit` so `worktree init [--target <path>]` creates a node, reports success, and suggests running `worktree run` next.
- 2025-11-25T20:19:53Z Reran `npm run build` once the CLI changes were in place to confirm the project still compiles under NodeNext.

## Outcomes
- A `WorkNode.initialize` helper now creates a default PLAN/STATE/logs layout, and reloads it so callers get a validated schema immediately.
- CLI `init` supports `--target`/`--node`, reuses the initialization helper, and prints guidance for running the first actionable step.
- Bootstrapped nodes now start with a documented Step 0.1 plan step that references `docs/work/WORK_PROTOCOL.md` per the protocol.
