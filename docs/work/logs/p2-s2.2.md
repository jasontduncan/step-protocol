# Phase 2 – Step 2.2: Implement `worktree run`
status: done
started: 2025-11-25T20:07:29Z
completed: 2025-11-25T20:13:06Z

## Scope
Load the requested WorkNode (default: the meta-node), determine the next actionable step, print clear instructions, and persist STATUS + log metadata so the runner can mark progress.

## Plan
- [x] Load the target WorkNode (meta-node by default) and locate the next actionable step.
- [x] Print structured instructions (phase/step/label details, plan bullets, log location) for the caller.
- [x] Update STATE/logs when the step should move to `in-progress` or `done`, including a `--complete` flag for finalizing steps.

## Notes
- 2025-11-25T20:07:35Z Extended `src/cli.ts` with a `run` handler that parses `--target`/`--complete`, loads `docs/work/`, creates or reuses the per-step log, and persists status changes via the WorkNode API.
- 2025-11-25T20:07:40Z Updated `WorkNode` imports so the CLI can update STATE entries after log creation and print guidance for calling `worktree run --complete` when the task finishes.
- 2025-11-25T20:07:44Z Added a `bin` entry to `package.json`, created `bin/worktree.js`, and recompiled the CLI to exercise the new command blueprint.
- 2025-11-25T20:07:46Z Verified the build (`npm run build`) so the scaffolded CLI compiles under the NodeNext toolchain.
- 2025-11-25T20:13:35Z Re-ran `npm run build` after wiring the `run` handler to confirm the CLI still compiles.
- 2025-11-25T20:15:06Z Reran `npm run build` once more after tightening the command switch to keep only `run` invoking the new handler.

## Outcomes
- `worktree run` now loads the meta-node, selects the next actionable step, persists an `in-progress` state, and prints the step details plus the log path for human/LLM actors.
- The CLI supports `--complete` to mark the in-progress step as `done`, update its log header, and persist STATE in one command.
- The package’s `bin.worktree` entry and `bin/worktree.js` stub tie the built CLI to `node dist/cli.js`, enabling the `worktree` executable once published.
